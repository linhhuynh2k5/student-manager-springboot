<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω sinh vi√™n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="container mt-4">

<h2 class="text-center mb-4">üéì QU·∫¢N L√ù SINH VI√äN</h2>

<!-- FORM -->
<div class="card p-3 mb-3">
    <input type="hidden" id="index">
    <div class="row g-2">
        <div class="col">
            <input id="name" class="form-control" placeholder="H·ªç t√™n">
        </div>
        <div class="col">
            <input id="age" type="number" class="form-control" placeholder="Tu·ªïi">
        </div>
        <div class="col">
            <input id="email" class="form-control" placeholder="Email">
        </div>
        <div class="col">
            <button class="btn btn-success w-100" onclick="save()">L∆∞u</button>
        </div>
    </div>
</div>

<!-- SEARCH -->
<div class="input-group mb-3">
    <input id="search" class="form-control" placeholder="T√¨m theo t√™n">
    <button class="btn btn-primary" onclick="search()">T√¨m</button>
</div>

<!-- TABLE -->
<table class="table table-bordered table-hover">
    <thead class="table-dark">
    <tr>
        <th>#</th>
        <th>T√™n</th>
        <th>Tu·ªïi</th>
        <th>Email</th>
        <th>H√†nh ƒë·ªông</th>
    </tr>
    </thead>
    <tbody id="data"></tbody>
</table>

<script>
let students = JSON.parse(localStorage.getItem("students")) || [];
let filtered = [...students];

function render(list) {
    let html = "";
    list.forEach((s, i) => {
        html += `
        <tr>
            <td>${i + 1}</td>
            <td>${s.name}</td>
            <td>${s.age}</td>
            <td>${s.email}</td>
            <td>
                <button class="btn btn-warning btn-sm" onclick="edit(${i})">S·ª≠a</button>
                <button class="btn btn-danger btn-sm" onclick="del(${i})">X√≥a</button>
            </td>
        </tr>`;
    });
    document.getElementById("data").innerHTML = html;
}

function save() {
    const index = document.getElementById("index").value;
    const student = {
        name: name.value,
        age: age.value,
        email: email.value
    };

    if (!student.name || !student.age || !student.email) {
        alert("Nh·∫≠p ƒë·ªß th√¥ng tin!");
        return;
    }

    if (index === "") {
        students.push(student);
    } else {
        students[index] = student;
    }

    localStorage.setItem("students", JSON.stringify(students));
    clearForm();
    render(students);
}

function del(i) {
    if (confirm("X√≥a sinh vi√™n n√†y?")) {
        students.splice(i, 1);
        localStorage.setItem("students", JSON.stringify(students));
        render(students);
    }
}

function edit(i) {
    index.value = i;
    name.value = students[i].name;
    age.value = students[i].age;
    email.value = students[i].email;
}

function search() {
    const key = search.value.toLowerCase();
    filtered = students.filter(s => s.name.toLowerCase().includes(key));
    render(filtered);
}

function clearForm() {
    index.value = "";
    name.value = "";
    age.value = "";
    email.value = "";
}

render(students);
</script>

</body>
</html>
